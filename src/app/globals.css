@import 'tailwindcss';

/* 모바일 터치/하이라이트 보정 */
html,
body {
  -webkit-tap-highlight-color: transparent;
  -webkit-text-size-adjust: 100%;
  touch-action: manipulation;
  font-family: 'Pretendard', sans-serif;
}

/* 이미지/비디오 기본 리셋 */
img,
video {
  max-width: 100%;
  height: auto;
  display: block;
}

/* Pretendard 폰트 정의 */
@font-face {
  font-family: 'Pretendard';
  font-weight: 100;
  font-style: normal;
  font-display: swap;
  src: url('/font/Pretendard-Thin.woff2') format('woff2');
}

@font-face {
  font-family: 'Pretendard';
  font-weight: 200;
  font-style: normal;
  font-display: swap;
  src: url('/font/Pretendard-ExtraLight.woff2') format('woff2');
}

@font-face {
  font-family: 'Pretendard';
  font-weight: 300;
  font-style: normal;
  font-display: swap;
  src: url('/font/Pretendard-Light.woff2') format('woff2');
}

@font-face {
  font-family: 'Pretendard';
  font-weight: 400;
  font-style: normal;
  font-display: swap;
  src: url('/font/Pretendard-Regular.woff2') format('woff2');
}

@font-face {
  font-family: 'Pretendard';
  font-weight: 500;
  font-style: normal;
  font-display: swap;
  src: url('/font/Pretendard-Medium.woff2') format('woff2');
}

@font-face {
  font-family: 'Pretendard';
  font-weight: 600;
  font-style: normal;
  font-display: swap;
  src: url('/font/Pretendard-SemiBold.woff2') format('woff2');
}

@font-face {
  font-family: 'Pretendard';
  font-weight: 700;
  font-style: normal;
  font-display: swap;
  src: url('/font/Pretendard-Bold.woff2') format('woff2');
}

@font-face {
  font-family: 'Pretendard';
  font-weight: 800;
  font-style: normal;
  font-display: swap;
  src: url('/font/Pretendard-ExtraBold.woff2') format('woff2');
}

@font-face {
  font-family: 'Pretendard';
  font-weight: 900;
  font-style: normal;
  font-display: swap;
  src: url('/font/Pretendard-Black.woff2') format('woff2');
}

/* iOS safe-area가 필요한 영역에서 사용 가능 (임의): */
.safe-padding {
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  padding-bottom: env(safe-area-inset-bottom);
  padding-top: env(safe-area-inset-top);
}

@layer utilities {
  /* dvh 안전 유틸: 지원되면 dvh, 아니면 svh → vh 폴백 */
  .min-h-screen-safe {
    min-height: 100vh;
    min-height: 100svh;
  }

  @supports (height: 100dvh) {
    .min-h-screen-safe {
      min-height: 100dvh;
    }
  }

  .h-screen-safe {
    height: 100svh;
  }
  @supports not (height: 100svh) {
    .h-screen-safe {
      height: 100vh;
    }
  }
  @supports (height: 100dvh) {
    .h-screen-safe {
      height: 100dvh;
    }
  }

  /* 내부 스크롤 영역 제스처 안정화 */
  .scroll-smooth-mobile {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
    touch-action: pan-y;
  }

  /* 기존 stage-scale-context는 유지하되, dvh 유틸과 함께 사용 가능 */
  /* 1em = 배율(px) 컨텍스트 */
  .stage-scale-context {
    /* 기본값 (props로 덮어씀) */
    --stage-base-w: 375;
    --stage-base-h: 668;

    /* 배율 제한: 1em = 1px (상한을 크게 잡아 높이 완전 맞춤) */
    --stage-min-scale: 0.5px; /* 너무 작아지는 것 방지 (원하면 조정/0px) */
    --stage-max-scale: 1000px; /* 상한 크게: tall 화면에서도 height=100dvh 보장 */

    /* 높이 기준 스케일:  font-size = 100dvh / baseH  (px 단위가 아님, '비율') */
    font-size: clamp(
      var(--stage-min-scale),
      calc(100dvh / var(--stage-base-h)),
      var(--stage-max-scale)
    );
  }

  /* dvh 미지원 브라우저 폴백 */
  @supports not (height: 100dvh) {
    .stage-scale-context {
      font-size: clamp(
        var(--stage-min-scale),
        calc(100vh / var(--stage-base-h)),
        var(--stage-max-scale)
      );
    }
  }
}

/* 그 외 전역 리셋/유틸은 기존 그대로 두면 됩니다 */
